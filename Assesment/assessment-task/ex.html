<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Health Check Booking</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            min-height: 100vh;
            background: #EEAECA;
            background: radial-gradient(circle, rgba(238, 174, 202, 1) 1%, rgba(148, 187, 233, 1) 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 900px;
        }

        .error {
            color: red;
            font-size: 14px;
        }
    </style>
</head>

<body>

    <div class="container">
        <h2 class="text-center text-white mb-4">Health Check Booking Form</h2>

        <!-- Form -->
        <div class="card shadow p-4 mb-4">
            <form id="bookingForm" novalidate>
                <div class="mb-3">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-control" id="name">
                    <div class="error" id="errorName"></div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Age</label>
                    <input type="number" class="form-control" id="age">
                    <div class="error" id="errorAge"></div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Gender</label>
                    <select class="form-select" id="gender">
                        <option value="">-- Select Gender --</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                    <div class="error" id="errorGender"></div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" id="email">
                    <div class="error" id="errorEmail"></div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Contact Number</label>
                    <input type="text" class="form-control" id="contact">
                    <div class="error" id="errorContact"></div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Preferred Date</label>
                    <input type="date" class="form-control" id="date">
                    <div class="error" id="errorDate"></div>
                </div>

                <button type="submit" class="btn btn-primary w-100">Book Appointment</button>
            </form>
        </div>

        <!-- Display Data -->
        <h3 class="text-center text-white mb-3">Saved Booking Details</h3>
        <div id="displayData" class="row gy-3"></div>
    </div>

    <script>
        const form = document.getElementById("bookingForm");
        const displayData = document.getElementById("displayData");

        // Validation function
        function validateForm() {
            let valid = true;

            // Reset error messages
            document.querySelectorAll(".error").forEach(el => el.textContent = "");

            const name = document.getElementById("name").value.trim();
            const age = document.getElementById("age").value.trim();
            const gender = document.getElementById("gender").value.trim();
            const email = document.getElementById("email").value.trim();
            const contact = document.getElementById("contact").value.trim();
            const date = document.getElementById("date").value.trim();

            if (!name) {
                document.getElementById("errorName").textContent = "Please enter your name";
                valid = false;
            }
            if (!age || age <= 0) {
                document.getElementById("errorAge").textContent = "Please enter a valid age";
                valid = false;
            }
            if (!gender) {
                document.getElementById("errorGender").textContent = "Please select gender";
                valid = false;
            }
            if (!email || !/^[^ ]+@[^ ]+\.[a-z]{2,3}$/.test(email)) {
                document.getElementById("errorEmail").textContent = "Please enter a valid email";
                valid = false;
            }
            if (!contact || !/^[0-9]{10}$/.test(contact)) {
                document.getElementById("errorContact").textContent = "Please enter a 10-digit contact number";
                valid = false;
            }
            if (!date) {
                document.getElementById("errorDate").textContent = "Please select a date";
                valid = false;
            }

            return valid;
        }

        // Save data to localStorage
        form.addEventListener("submit", function (e) {
            e.preventDefault();

            if (!validateForm()) return;

            const booking = {
                name: document.getElementById("name").value,
                age: document.getElementById("age").value,
                gender: document.getElementById("gender").value,
                email: document.getElementById("email").value,
                contact: document.getElementById("contact").value,
                date: document.getElementById("date").value
            };

            let bookings = JSON.parse(localStorage.getItem("healthBookings")) || [];
            bookings.push(booking);
            localStorage.setItem("healthBookings", JSON.stringify(bookings));

            alert("Appointment booked successfully!");
            showData();
            form.reset();
        });

        // Display saved data
        function showData() {
            const data = localStorage.getItem("healthBookings");
            displayData.innerHTML = "";

            if (data) {
                const bookings = JSON.parse(data);
                bookings.forEach((booking, index) => {
                    displayData.innerHTML += `
          <div class="col-md-6">
            <div class="card shadow-sm p-3">
              <h5 class="card-title">${booking.name}</h5>
              <p class="card-text"><strong>Age:</strong> ${booking.age}</p>
              <p class="card-text"><strong>Gender:</strong> ${booking.gender}</p>
              <p class="card-text"><strong>Email:</strong> ${booking.email}</p>
              <p class="card-text"><strong>Contact:</strong> ${booking.contact}</p>
              <p class="card-text"><strong>Date:</strong> ${booking.date}</p>
              <button class="btn btn-danger btn-sm" onclick="deleteBooking(${index})">Delete</button>
            </div>
          </div>
        `;
                });
            } else {
                displayData.innerHTML = "<p class='text-center text-white'>No bookings found.</p>";
            }
        }

        // Delete a booking
        function deleteBooking(index) {
            let bookings = JSON.parse(localStorage.getItem("healthBookings")) || [];
            bookings.splice(index, 1);
            localStorage.setItem("healthBookings", JSON.stringify(bookings));
            showData();
        }

        window.onload = showData;
    </script>

</body>

</html>