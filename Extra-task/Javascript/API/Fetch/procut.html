<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fake Store Products</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    <style>
        .spinner-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 150px;
        }

        .card-img-top {
            height: 200px;
            object-fit: contain;
        }

        .card-body {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .card-description {
            font-size: 0.9rem;
            color: #555;
            margin: 5px 0;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            /* NEW standard property (supported in modern browsers) */
            line-clamp: 3;
        }
    </style>
</head>

<body>
    <div class="container mt-5">

        <h1 class="mb-4 text-center">Store Products</h1>

        <!-- Buttons for categories -->
        <div class="d-flex justify-content-center flex-wrap mb-3">
            <button class="btn btn-primary m-2" onclick="filterCategory('all')">All</button>
            <button class="btn btn-secondary m-2" onclick="filterCategory('electronics')">Electronics</button>
            <button class="btn btn-warning m-2" onclick="filterCategory('jewelery')">Jewelery</button>
            <button class="btn btn-success m-2" onclick="filterCategory('men clothing')">Men Clothing</button>
            <button class="btn btn-info m-2" onclick="filterCategory('women clothing')">Women Clothing</button>
        </div>

        <!-- Search -->
        <div class="mb-4 text-center">
            <input type="text" id="searchInput" class="form-control w-50 d-inline" placeholder="Search products..."
                onkeyup="searchProducts()">
        </div>

        <!-- Loading Spinner -->
        <div class="spinner-container" id="spinner">
            <div class="spinner-border text-danger" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>

        <!-- Products Grid -->
        <div class="row" id="productGrid"></div>

    </div>

    <script>
        const productGrid = document.getElementById("productGrid");
        const spinner = document.getElementById("spinner");
        let products = [];

        // Fetch products
        fetch("https://fakestoreapi.com/products")
            .then(res => res.json())
            .then(data => {
                products = data;
                showProducts(products);
                spinner.style.display = "none";
            })
            .catch(err => {
                console.error(err);
                spinner.innerHTML = "<p class='text-danger'>Failed to load products.</p>";
            });

        // Show products
        function showProducts(productList) {
            productGrid.innerHTML = "";
            productList.forEach(product => {
                const productHTML = `
          <div class="col-md-3 mb-4">
            <div class="card h-100">
              <img src="${product.image}" class="card-img-top" alt="${product.title}">
              <div class="card-body d-flex flex-column justify-content-between">
                <h5 class="card-title">${product.title}</h5>
                <p class="card-description">${product.description}</p>
                <p class="text-muted"><strong>Category:</strong> ${product.category}</p>
                <h5 class="text-success">$${product.price}</h5>
                <p class="text-warning mb-2"><strong>Rating:</strong> ${product.rating.rate} ⭐ (${product.rating.count} reviews)</p>
                <button class="btn btn-primary mt-auto" onclick="addToCart('${product.title}')">Add to Cart</button>
              </div>
            </div>
          </div>
        `;
                productGrid.insertAdjacentHTML("beforeend", productHTML);
            });
        }

        // Filter by category
        function filterCategory(category) {
            if (category === 'all') {
                showProducts(products);
            } else {
                const filtered = products.filter(p => p.category.toLowerCase() === category.toLowerCase());
                showProducts(filtered);
            }
        }

        // Search by title
        function searchProducts() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const filtered = products.filter(p => p.title.toLowerCase().includes(query));
            showProducts(filtered);
        }

        // Add to Cart
        function addToCart(productTitle) {
            alert(`✅ "${productTitle}" added to cart!`);
            // Here you can later implement real cart functionality
        }
    </script>
</body>

</html>